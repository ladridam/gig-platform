{% extends "base.html" %}
{% block content %}
  <h2>Available Workers</h2>

  <!-- Worker List -->
  <ul class="list-group mb-4">
    {% for worker in workers %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <b>{{ worker.name }}</b><br>
          <small>Skill: {{ worker.skill }} | Experience: {{ worker.experience }}</small>
        </div>
        <form action="{{ url_for('delete_worker', id=worker.id) }}" method="POST" style="display: inline;">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
          <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this worker?')">
            <i class="fas fa-trash"></i>
          </button>
        </form>
      </li>
    {% else %}
      <li class="list-group-item">No workers available</li>
    {% endfor %}
  </ul>

  <!-- Add Worker Form -->
  <h4>Add a Worker</h4>
  <form method="POST">
    {{ form.hidden_tag() }}
    
    <div class="mb-3">
      {{ form.name.label(class="form-label") }}
      {{ form.name(class="form-control") }}
      {% if form.name.errors %}
        <div class="text-danger">
          {% for error in form.name.errors %}
            <small>{{ error }}</small>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      {{ form.skill.label(class="form-label") }}
      {{ form.skill(class="form-control") }}
      {% if form.skill.errors %}
        <div class="text-danger">
          {% for error in form.skill.errors %}
            <small>{{ error }}</small>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      {{ form.experience.label(class="form-label") }}
      {{ form.experience(class="form-control") }}
      {% if form.experience.errors %}
        <div class="text-danger">
          {% for error in form.experience.errors %}
            <small>{{ error }}</small>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      {{ form.location.label(class="form-label") }}
      {{ form.location(class="form-control", placeholder="e.g., Siliguri, West Bengal") }}
      <div class="form-text">Enter a street address, city name, or famous landmark</div>
      {% if form.location.errors %}
        <div class="text-danger">
          {% for error in form.location.errors %}
            <small>{{ error }}</small>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    
    <!-- Hidden inputs for coordinates -->
    <input type="hidden" name="lat" id="location-lat">
    <input type="hidden" name="lng" id="location-lng">
    
    <button type="submit" class="btn btn-primary">Add Worker</button>
  </form>
{% endblock %}